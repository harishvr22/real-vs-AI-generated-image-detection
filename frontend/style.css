:root{
  --font-sans: 'Poppins', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  --font-display: 'Playfair Display', Georgia, serif;

  --bg: 0 0% 100%;
  --fg: 222 84% 5%;
  --muted: 215 16% 47%;
  --card: 0 0% 100%;
  --border: 214 32% 91%;
  --primary: 252 80% 60%;
  --primary-contrast: 0 0% 100%;
  --accent: 222 84% 60%;
  --ring: 217 91% 60%;
  --danger: 0 84% 60%;

  --radius: 12px;
  --shadow-1: 0 10px 30px -12px hsl(var(--accent) / .25);
  --shadow-2: 0 8px 24px -10px hsl(var(--ring) / .35);
  --gradient: linear-gradient(135deg, hsl(var(--accent)) 0%, hsl(var(--primary)) 100%);
  --transition: all .25s cubic-bezier(.4,0,.2,1);
}

/* Global */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: var(--font-sans);
  color:hsl(var(--fg));
  background:hsl(var(--bg));
  line-height:1.5;
  overflow-x:hidden;
}
body::before{
  content:"";position:fixed;inset:-30% -20%;z-index:-1;pointer-events:none;
  background:
    radial-gradient(900px 600px at 15% 25%, hsl(var(--accent) / .18), transparent 60%),
    radial-gradient(800px 600px at 85% 75%, hsl(var(--primary) / .18), transparent 60%);
  filter: blur(60px) saturate(120%);
  animation:bg-pan 16s ease-in-out infinite alternate;
}
@keyframes bg-pan{from{transform:translate3d(-2%,0,0)}to{transform:translate3d(2%,0,0)}}

img{max-width:100%;display:block}
.visually-hidden{position:absolute;clip:rect(0 0 0 0);clip-path:inset(50%);width:1px;height:1px;margin:-1px;overflow:hidden;padding:0;border:0}
.hidden{display:none !important}
.strong{font-weight:600}
.container{max-width:1120px;margin-inline:auto;padding-inline:1rem}
.skip-link{position:absolute;left:-999px;top:-999px}
.skip-link:focus{left:1rem;top:1rem;z-index:50;background:#fff;padding:.5rem .75rem;border-radius:8px;box-shadow:var(--shadow-2)}

/* Header */
.site-header{position:relative;overflow:hidden;border-bottom:1px solid hsl(var(--border))}
.site-header::before{content:"";position:absolute;inset:-20% -10%;background:var(--gradient);filter: blur(60px) saturate(120%);opacity:.18;transform:translate3d(0,0,0)}
.hero{padding:3.75rem 0;text-align:center}
.hero__title{font-family:var(--font-display);font-weight:700;letter-spacing:.2px;font-size:clamp(1.9rem,4vw,2.8rem);line-height:1.1;margin:0}
.hero__subtitle{color:hsl(var(--muted));margin:.75rem 0 0}

/* Card */
.card{background:hsl(var(--card) / .8);backdrop-filter:saturate(140%) blur(6px);border:1px solid hsl(var(--border));border-radius:var(--radius);box-shadow:var(--shadow-1);margin:1.25rem 0;transition:transform .2s ease}
.tilt:hover{transform:translateY(-2px)}
.card__header{display:flex;gap:1rem;align-items:center;justify-content:space-between;padding:1rem 1rem 0 1rem}
.card__title{font-size:1.125rem;margin:0}
.card__desc{color:hsl(var(--muted));margin:.25rem 0 0}
.card__body{padding:1rem}

/* Dropzone */
.dropzone{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.75rem;border:2px dashed hsl(var(--border));border-radius:calc(var(--radius) - 4px);padding:1.25rem;min-height:220px;background:hsl(var(--card));transition:var(--transition);box-shadow:var(--shadow-1)}
.dropzone[data-active="true"]{border-color:hsl(var(--ring));box-shadow:0 0 0 4px hsl(var(--ring) / .12), var(--shadow-2)}
.dropzone:focus{outline:none;box-shadow:0 0 0 3px hsl(var(--ring) / .3)}
.icon{width:28px;height:28px;color:hsl(var(--muted))}
.floaty{animation:float 4s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}
.badge{display:inline-flex;align-items:center;gap:.5ch;border:1px solid hsl(var(--border));padding:.25rem .5rem;border-radius:999px;font-size:.75rem;color:hsl(var(--fg));background:hsl(var(--bg))}
.preview{width:100%;max-width:520px;border-radius:10px;overflow:hidden;border:1px solid hsl(var(--border));box-shadow:var(--shadow-1)}
.preview img{width:100%;height:auto;object-fit:contain;background:hsl(var(--bg))}
.muted{color:hsl(var(--muted))}

/* Actions */
.actions{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:1rem;margin-top:1rem}
.action-buttons{display:flex;gap:.75rem}

/* Buttons */
.btn{position:relative;display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1rem;border-radius:10px;border:1px solid transparent;font-weight:600;cursor:pointer;transition:var(--transition)}
.btn:disabled{opacity:.6;cursor:not-allowed}
.btn-hero{color:hsl(var(--primary-contrast));background:var(--gradient);box-shadow:var(--shadow-2);overflow:hidden}
.btn-hero::before{content:"";position:absolute;inset:-200% -30%;background:linear-gradient(120deg, transparent 30%, #fff6 40%, transparent 50%);transform:translateX(-30%);transition:transform .6s ease}
.btn-hero:hover{transform:translateY(-1px)}
.btn-hero:hover::before{transform:translateX(30%)}
.btn-hero.loading{pointer-events:none}
.btn-hero.loading::after{content:"";width:16px;height:16px;border-radius:50%;border:2px solid #fff7;border-top-color:#fff;animation:spin .8s linear infinite;position:absolute;right:12px}
@keyframes spin{to{transform:rotate(360deg)}}
.btn-soft{background:hsl(var(--bg));border-color:hsl(var(--border));color:hsl(var(--fg))}
.btn-soft:hover{background:hsl(var(--bg) / .9)}
.btn-link{background:transparent;border-color:transparent;color:hsl(var(--accent));padding:.25rem .25rem}
.btn-link:hover{opacity:.9}

/* Progress */
.progress{position:relative;height:10px;border-radius:999px;background:hsl(var(--border));overflow:hidden}
.progress__bar{position:absolute;left:0;top:0;bottom:0;width:0;background:var(--gradient);background-size:200% 100%}
.progress__bar.animated{background-image:repeating-linear-gradient(45deg, #ffffff33 0 10px, #0000 10px 20px), var(--gradient);animation:stripe 1s linear infinite}
@keyframes stripe{from{background-position:0 0, 0 0}to{background-position:40px 0, 200% 0}}

/* Result */
.result{display:flex;flex-direction:column;gap:.75rem}
.result__row{display:flex;justify-content:space-between;align-items:center}

/* Toast */
.toast{position:fixed;inset:auto 1rem 1rem auto;max-width:min(92vw,380px);background:hsl(var(--card));border:1px solid hsl(var(--border));box-shadow:var(--shadow-2);border-radius:12px;padding:.75rem 1rem;color:hsl(var(--fg));opacity:0;transform:translateY(8px);transition:var(--transition);pointer-events:none}
.toast.show{opacity:1;transform:translateY(0)}

/* Footer */
.site-footer{border-top:1px solid hsl(var(--border));margin-top:2rem}
.site-footer .container{padding:1rem}

/* Interactive underline */
.story-link{position:relative}
.story-link::after{content:"";position:absolute;left:0;bottom:-2px;width:100%;height:2px;background:hsl(var(--accent));transform:scaleX(0);transform-origin:bottom right;transition:transform .3s ease}
.story-link:hover::after{transform:scaleX(1);transform-origin:bottom left}

/* Responsive */
@media (max-width: 640px){
  .card__header{flex-direction:column;align-items:flex-start}
  .actions{flex-direction:column;align-items:flex-start}
  .action-buttons{width:100%}
  .action-buttons .btn{flex:1}
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  .floaty, .btn-hero::before, .progress__bar.animated, body::before { animation: none !important }
  .btn-hero:hover{transform:none}
}
/* Position the History button at the top-right */
.history-btn {
  position: absolute;
  top: 1.5rem;
  right: 1.5rem;
  z-index: 10;
  font-size: 0.9rem;
  padding: 0.6rem 1.1rem;
}

@media (max-width: 640px) {
  .history-btn {
    top: 1rem;
    right: 1rem;
    font-size: 0.85rem;
    padding: 0.5rem 0.9rem;
  }
}
